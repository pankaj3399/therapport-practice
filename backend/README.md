# Therapport Backend

Node.js/Express backend API for Therapport Practice App.

## Setup

1. Install dependencies:
```bash
npm install
```

2. Create a `.env` file (see `ENV_TEMPLATE.md` for required variables)

3. Generate database migrations:
```bash
npm run db:generate
```

4. Run database migrations:
```bash
npm run db:migrate
```

5. Seed initial data (locations, rooms, dummy user, admin):
```bash
npm run db:seed
```

## Database Migrations

Migrations are stored in the `drizzle/` directory (generated by drizzle-kit).

### Workflow:
1. Make changes to `src/db/schema.ts`
2. Run `npm run db:generate` to generate migration files
3. Run `npm run db:migrate` to apply migrations to database
4. Run `npm run db:seed` to insert initial data (only needed once)

## Initial Data

The seed script creates:
- **Locations**: Pimlico (4 rooms) and Kensington (6 rooms)
- **Rooms**: All rooms for both locations
- **Dummy User**: rober.assogioli@therapport.co.uk (password: `dummy-password-change-me`)
- **Admin User**: info@therapport.co.uk (password: set via `ADMIN_PASSWORD` env var, defaults to `admin123`)

## Development

```bash
npm run dev
```

Server runs on http://localhost:3000

## Database Connection

The app will log database connection status on startup:
- ✅ Database connected successfully (when connection is established)
- ❌ Database connection error (if connection fails)

You can also check the `/health` endpoint to verify the server is running.

